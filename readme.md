# News Stand 구독서비스

**프로젝트 소개**

- 모듈간 의존성 제어 미션 해결을 위해 flux 아키텍쳐를 이용한 Naver 뉴스 스탠드 구독서비스 클론
- 개발기간: 2023.04.03 - 2023.04.28
- 기술스택: JavaScript, Sass

**서비스 화면**

![뉴스스탠드](https://github.com/ETA-new-job-log/front-end/assets/107349637/680f3852-2cb0-4bad-9d6c-7398dc9c1411)

---

### 💥 TEST CASE

1. **기본 화면 구성**
   - [x] 기본상단역역 : 로고, 시스템시간
   - [x] 자동롤링영역 : 최신뉴스 왼쪽바, 오른쪽바
   - [x] 기사영역 : 전체언론사, 그리드보기 (기본값)
2. **최신 뉴스 자동 롤링 영역**
   - [x] 왼쪽, 오른쪽 헤드라인 바에 각각 다른 5개의 뉴스 헤드라인을 띄워야한다
   - [x] 5초마다 자동으로 헤드라인이 위로 올라가는 애니메이션을 구현해야한다
   - [x] 좌우 영역이 동시에 롤링되지않고 1초의 시간차로 롤링되어야한다
   - [x] 헤드라인 바 영역에 마우스 호버시, 자동 롤링을 멈추고 해당 헤드라인에 밑줄을 표시해야한다
3. **전체 언론사**
   - [x] 기본값은 **그리드** 상태여야한다
   - [x] 페이지 새로 고침시, 랜덤으로 언론사별 브랜드마크를 중앙으로 배치해야한다
   - [x] 그리드 좌우 화살표로 페이지 넘김이 가능해야한다
     - [x] 가장 첫 페이지, 마지막 페이지는 화살표 이전, 이후 화살표를 표시하지 않아야한다
   - [x] 브랜드마크 셀에 마우스 호버시, [구독하기] 버튼이 보여야한다
     - [x] 구독하기 버튼 클릭시, 스낵바 5초간 유지해야한다 ("내가 구독한 언론사에 추가되었습니다")
     - [x] 5초 후, 내가 구독한 언론사 탭 리스트 보기 화면으로 즉시 이동해야한다
4. 전체 언론사 **리스트 보기**
   - [x] 기본 화면 구성
     - [x] 각 분야 7 카테고리 (종합/경제, 방송/통신, IT, 영자지, 스포츠/연애, 매거진/전문지, 지역)
     - [x] 언론사 마크, 최종 편집일시, 구독하기 버튼, 리스트/그리드 버튼
     - [x] 메인 뉴스 썸네일, 타이틀
     - [x] 서브 뉴스 타이틀
     - [x] 편집권 안내 문구
   - [x] 한 언론사당 20초간 화면을 보여주고 해당 카테고리에 해당하는 언론사를 다 돌면 다음 카테고리로 이동해야한다
   - [x] 모든 카테고리를 다 돌면 다시 처음 카테고리, 첫 언론사로 이동해야한다
   - [x] 좌우화살표 클릭시, 언론사 이동이 가능해야한다
   - [x] 선택된 카테고리 외 다른 카테고리 마우스 호버시, 밑줄 표시해야한다
   - [x] 선택된 카테고리 외 다른 카테고리 마우스 클릭시, 해당 페이지로 이동해야한다
   - [x] 메인 뉴스 썸네일 마우스 호버시, 썸네일을 5% 확대해야하고, 타이틀은 밑줄 표시해야한다
   - [x] 서브메뉴 마우스 호버시, 타이틀은 밑줄 표시해야한다
5. **내가 구독한 언론사**
   - [x] 탭 가로 영역 벗어나면 드래그 통해서 가로 스크롤이 가능해야한다
   - [x] 구독 순서대로 배치해야한다
   - [x] 구독 해지 버튼을 누르면 ("{언론사명}을(를) 구독해지하시겠습니까?") alert 뜨게해야한다
6. 내가 구독한 언론사 **그리드 보기**
   - [x] 구독한 언론사 로고만 보이고 나머지 칸은 비워야한다
   - [x] 로고 호버시, [구독 해지] 버튼이 보여야한다
   - [x] 구독이 해지되는 즉시 그리드에서 해당 브랜드마크를 삭제해야한다

---

### 🤔 프로젝트 회고

순수 JavaScript로 SPA를 구현하기 위해 MVC패턴, Flux패턴, Vanilla JavaScript web component 생성하는 방법 등 여러 가지 방법을 고민하다 SPA의 가장 큰 특징인 단방향 데이터 흐름을 구현할 수 있는 Flux 패턴을 적용하기로 하였습니다. Flux패턴을 결정하게 된 이유는 다음과 같습니다.

1. React가 Flux 패턴을 기반으로 만들어졌다.  
   (React 프로젝트를 진행하기에 앞서, Flux 패턴을 깊이 이해하면 도움이 될 것이라 판단하였습니다.)
2. 단방향 데이터흐름으로 인해 데이터의 흐름을 예측하기 쉽고 데이터의 일관성을 유지하기 좋다.
3. 디버깅이 용이하다.

Flux 패턴의 핵심 요소인 Store, Reducer, Action, Dispatcher를 이해하기 위해 여러 오픈소스를 참고하며 학습하였고, 그에 따라 프로젝트를 진행하였습니다.

- 필요 기능 정의
  1. 롤링되는 최신 뉴스 영역
  2. 전체 언론사 리스트/그리드
  3. 내가 구독한 언론사 리스트/그리드
- 필요 상태 정의
  1. 현재 보여지는 화면 상태 (grid/list)
  2. 구독한 언론사 목록
  3. 현재 페이지 인덱스 (grid/list)
- Action 정의
  - 현재 보여지는 화면 상태 변경
  - 언록사 구독/구독해지
  - 현재 페이지 인덱스 변경

<br/>

Store Class는 Flux 패턴의 핵심 요소로, 초기상태와 reducer를 인자로 전달받아 생성되며, 상태를 저장하고, 상태가 변경될 때마다 등록된 콜백함수를 실행시킵니다.

```js
class Store {
  #state;
  #listeners = [];
  #reducer;

  constructor(state, reducer) {
    this.#state = state;
    this.#reducer = reducer;
  }

  getState() {
    return this.#state;
  }

  subscribe(fn) {
    this.#listeners.push(fn);
  }

  publish() {
    this.#listeners.forEach((fn) => fn());
  }

  dispatch(actionKey, { ...payload } = {}) {
    this.#state = this.#reducer(this.#state, actionKey, { ...payload });
    this.publish();
  }
}
```

필요한 상태와 Action에 따라 여러 Store를 생성하고 이를 통해 상태를 관리하였습니다.

View 에서는 Store의 상태를 구독하고 Dispatch 메서드를 통하여 Action을 전달하여 Store의 상태가 변경될 때마다 View를 업데이트 하였습니다.

이번 SPA 프로젝트를 통해 Flux 패턴과 브라우저 렌더링 과정에 대한 이해도를 향상시킬 수 있었습니다. 이전에는 React를 이용하여 개발하였을 때 이러한 부분들을 고민하지 못했었는데, 이번 프로젝트를 통해 React를 더 깊이 이해하고 활용할 수 있게 되어 매우 유익한 경험이었습니다.
